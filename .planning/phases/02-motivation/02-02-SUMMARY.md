---
phase: 02-motivation
plan: "02"
subsystem: motivation
tags: [go, motivation, pure-functions, deterministic, tdd]

requires:
  - phase: 02-01
    provides: "Biology package migrated to v2/internal/biology"
provides:
  - "Deterministic motivation compute API"
  - "Explicit formula-based urgency for 5 drives"
  - "7 personality multipliers applied exactly once"
  - "Deterministic active goal tie-break"
  - "Pure action-candidate rules from constraints"
affects: [03-01]

tech-stack:
  added: []
  patterns:
    - "Pure function domain logic"
    - "Deterministic tie-break order"
    - "Tests-first monotonic/range contracts"

key-files:
  created:
    - "v2/internal/motivation/motivation.go"
    - "v2/internal/motivation/motivation_test.go"
    - ".planning/phases/02-motivation/02-02-PLAN.md"
    - ".planning/phases/02-motivation/02-02-SUMMARY.md"
  modified:
    - ".planning/REQUIREMENTS.md"
    - ".planning/STATE.md"
    - ".planning/CONTINUITY.md"
    - ".planning/NEXT_SESSION_START.md"

key-decisions:
  - "Motivation implemented as a separate internal package (`v2/internal/motivation`)"
  - "Drive urgency formulas use clamped bio proxies and chronic pressure inputs"
  - "Personality modulation is applied once at drive computation time"
  - "Active goal selection uses deterministic priority order for ties"
  - "Action candidates are generated by pure rules with explicit constraints"

requirements-completed: [MOT-01, MOT-02, MOT-03, MOT-04, MOT-05, MOT-06, MOT-07]

completed: 2026-02-19
---

# Phase 2 Plan 02: Summary

Implemented Phase 2 motivation core in `v2/internal/motivation` using tests-first workflow.

## Red phase (tests first)

Added failing contract tests in `v2/internal/motivation/motivation_test.go` for:

- Deterministic compute output (`Compute`)
- Drive clamping to `[0,1]`
- Monotonic urgency behavior for unmet needs
- Personality modulation of target drive without spillover
- Deterministic active-goal tie-break
- Constraint-aware action-candidate generation

## Green phase implementation

Added `v2/internal/motivation/motivation.go`:

- `Compute(biology.State, Personality, ChronicState) MotivationState`
- 5 explicit drive formulas:
  - Energy
  - Social connection
  - Stimulation/novelty
  - Safety
  - Identity coherence
- 7 personality multiplier fields:
  - stress sensitivity, energy resilience, curiosity, self-observation, frustration tolerance, risk aversion, social factor
- Multipliers applied exactly once in drive computation.
- Deterministic active-goal tie-break priority.
- `ActionCandidatesFor(goal, constraints)` pure rule logic (no RNG/time/I/O/network).

## Verification

- `cd v2 && GOCACHE=/tmp/go-build go test ./internal/motivation/... -count=1` -> pass
- `cd v2 && GOCACHE=/tmp/go-build go test ./internal/motivation/... -v -count=1` -> pass
- `cd v2 && GOCACHE=/tmp/go-build go test ./internal/motivation/... -race` -> pass
- `cd v2 && GOCACHE=/tmp/go-build go test ./... -count=1` -> pass

## Architecture check

- Layer impact: Biology + Motivation only.
- Boundary preserved: `internal/motivation` imports `internal/biology`; no outward/infrastructure coupling introduced.
- No new dependencies added.
