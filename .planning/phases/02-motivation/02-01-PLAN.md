---
phase: 02-motivation
plan: "01"
type: tdd
wave: 1
depends_on:
  - "01-06"
files_modified:
  - v2/internal/biology/state.go
  - v2/internal/biology/decay.go
  - v2/internal/biology/interactions.go
  - v2/internal/biology/thresholds.go
  - v2/internal/biology/noise.go
  - v2/internal/biology/engine.go
  - v2/internal/biology/state_test.go
  - v2/internal/biology/decay_test.go
  - v2/internal/biology/interactions_test.go
  - v2/internal/biology/thresholds_test.go
  - v2/internal/biology/noise_test.go
  - v2/internal/biology/engine_test.go
autonomous: true
requirements:
  - MOT-05

must_haves:
  truths:
    - "Biology baseline migrates from `v2/bio` to `v2/internal/biology` with package name `biology` and no behavioral regressions"
    - "All existing biology tests continue to pass after migration with no assertion weakening"
    - "No production code remains in `v2/bio`; old path is removed"
    - "Migration introduces no new dependencies and no boundary violations"
    - "Public behavior of core constructors and pipeline remains unchanged (state defaults, decay/noise/threshold behavior, Engine.Tick order)"
  artifacts:
    - path: "v2/internal/biology"
      provides: "Canonical biology package under internal boundary"
      exports: ["State", "NewDefaultState", "ApplyDecay", "ApplyInteractions", "EvaluateThresholds", "ApplyNoise", "Engine", "Config", "TickResult", "NewEngine", "NewEngineWithSeed"]
    - path: "v2/internal/biology/engine_test.go"
      provides: "Phase 1 scenario regression suite remains green after package move"
      exports: ["TestEngine_TenMinutesUnattended", "TestEngine_FastMode_TwoMinutes", "TestEngine_AllVariablesInRange", "TestEngine_DtZero_NoDecay", "TestEngine_ThresholdsDetectedDuringDegradation"]
  key_links:
    - from: "v2/internal/biology/engine.go"
      to: "v2/internal/biology/decay.go"
      via: "Engine.Tick calls ApplyDecay"
      pattern: "ApplyDecay\\(s,"
    - from: "v2/internal/biology/engine.go"
      to: "v2/internal/biology/interactions.go"
      via: "Engine.Tick calls ApplyInteractions"
      pattern: "ApplyInteractions\\(s,"
    - from: "v2/internal/biology/engine.go"
      to: "v2/internal/biology/noise.go"
      via: "Engine.Tick calls ApplyNoise"
      pattern: "ApplyNoise\\(s,"
    - from: "v2/internal/biology/engine.go"
      to: "v2/internal/biology/thresholds.go"
      via: "Engine.Tick calls EvaluateThresholds then ApplyThresholdCascades"
      pattern: "EvaluateThresholds\\(s,"
---

<objective>
Migrate the completed Phase 1 biology implementation from `v2/bio` to `v2/internal/biology` with package name `biology`, preserving behavior and test guarantees.

Purpose: enforce internal layer boundaries before implementing Motivation logic, so Phase 2 starts on the intended architecture and avoids dual-package drift.
Output: `v2/internal/biology/*` as the single biology implementation path; `v2/bio` removed.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@.planning/phases/01-biological-foundation/01-06-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Red phase safety checks before migration</name>
  <files>v2/bio/*</files>
  <action>
Run baseline checks on the current package before moving files:

```bash
cd v2
GOCACHE=/tmp/go-build go test ./... -count=1
GOCACHE=/tmp/go-build go test ./bio/... -race
```

Do not change tests yet. Capture failures if any and stop if baseline is not green.
  </action>
  <verify>Both commands pass before migration begins.</verify>
  <done>Baseline verified green and ready to migrate.</done>
</task>

<task type="auto">
  <name>Task 2: Move package to internal boundary</name>
  <files>v2/internal/biology/*</files>
  <action>
Perform a file move from `v2/bio` to `v2/internal/biology` and rename package declarations from `package bio` to `package biology` in all moved files.

Rules:
- Keep file content and behavior unchanged except package rename/import-path fallout.
- Keep tests in same package (`package biology`) to preserve internal access where currently relied upon.
- Use non-destructive, traceable moves (`mv`/`git mv` style) rather than rewriting from scratch.
- Preserve Go formatting (`gofmt`).

After move:
- `v2/bio` directory should not contain production files.
- Any stale references to `bio` package path should be updated.
  </action>
  <verify>Run `cd v2 && rg -n "^package bio$|/v2/bio"` and ensure no production references remain.</verify>
  <done>All biology files live under `v2/internal/biology` with `package biology` and compile.</done>
</task>

<task type="auto">
  <name>Task 3: Green phase verification after migration</name>
  <files>v2/internal/biology/*</files>
  <action>
Run full verification after migration:

```bash
cd v2
GOCACHE=/tmp/go-build go test ./... -count=1
GOCACHE=/tmp/go-build go test ./internal/biology/... -v -count=1
GOCACHE=/tmp/go-build go test ./internal/biology/... -race
```

Do not relax assertions. If failures occur, fix implementation/package migration issues only.
  </action>
  <verify>All commands exit 0; Phase 1 scenario tests still pass and print expected diagnostics.</verify>
  <done>Migration is behavior-preserving and race-clean.</done>
</task>

<task type="auto">
  <name>Task 4: Planning sync after migration</name>
  <files>.planning/*.md</files>
  <action>
Update planning state to reflect migration completion and architecture decision:
- Add `.planning/phases/02-motivation/02-01-SUMMARY.md`
- Update `.planning/STATE.md`, `.planning/CONTINUITY.md`, `.planning/NEXT_SESSION_START.md`
- Record that `v2/internal/biology` is now canonical and `v2/bio` is retired.
  </action>
  <verify>Docs reference `v2/internal/biology` as active biology path for Phase 2.</verify>
  <done>Session handoff reflects post-migration architecture accurately.</done>
</task>

</tasks>

<verification>
- `cd v2 && GOCACHE=/tmp/go-build go test ./... -count=1` exits 0
- `cd v2 && GOCACHE=/tmp/go-build go test ./internal/biology/... -race` exits 0
- `cd v2 && rg -n "^package bio$|/v2/bio"` shows no production usage
- `v2/internal/biology/engine_test.go` scenario tests pass unchanged in intent/thresholds
</verification>

<success_criteria>
Biology package is migrated into `internal` boundaries with identical behavior and passing tests, eliminating duplicate package paths before Motivation feature work begins.
</success_criteria>

<output>
After completion, create `.planning/phases/02-motivation/02-01-SUMMARY.md`
</output>
