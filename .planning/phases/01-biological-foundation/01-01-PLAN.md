---
phase: 01-biological-foundation
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - v2/go.mod
  - v2/bio/state.go
autonomous: true
requirements:
  - BIO-01
  - BIO-02
  - BIO-06

must_haves:
  truths:
    - "v2/ Go module initializes with `go build ./...` and zero errors"
    - "NewDefaultState() returns a *State with all 8 fields set to their physiological baselines"
    - "clampAll() constrains every variable to its declared valid range — no field can go out of bounds"
    - "Every bio variable is documented with its drive mapping (BIO-02 contract in code comment)"
  artifacts:
    - path: "v2/go.mod"
      provides: "Go module declaration for github.com/marczahn/person/v2"
      contains: "module github.com/marczahn/person/v2"
    - path: "v2/bio/state.go"
      provides: "State struct, NewDefaultState(), variable ranges, clamp helper"
      exports: ["State", "NewDefaultState", "VarRange", "clamp", "clampAll"]
  key_links:
    - from: "v2/bio/state.go"
      to: "NewDefaultState()"
      via: "returns *State with baselines"
      pattern: "func NewDefaultState\\(\\) \\*State"
    - from: "v2/bio/state.go"
      to: "clampAll"
      via: "enforces valid ranges per variable"
      pattern: "func clampAll\\(s \\*State\\)"
---

<objective>
Initialize the v2 Go module and implement the core bio state model: 8-variable State struct with physiological baselines, valid ranges, clamp helpers, and drive-mapping documentation.

Purpose: Every subsequent bio component (decay, interactions, thresholds, engine) depends on the State type and its range contracts. This is the shared foundation.
Output: v2/go.mod (standalone module), v2/bio/state.go (State, NewDefaultState, clampAll, VarRange)
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-biological-foundation/01-CONTEXT.md
@.planning/phases/01-biological-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize v2 Go module</name>
  <files>v2/go.mod</files>
  <action>
Create the `v2/` directory and initialize a standalone Go module. The module path is `github.com/marczahn/person/v2` (per locked decision — same repo as V1, v2/ subdirectory, standard Go major-version convention).

Run:
```
mkdir -p v2/bio
cd v2
go mod init github.com/marczahn/person/v2
```

Verify go.mod contains `module github.com/marczahn/person/v2` and `go 1.24` (match V1's go version). No external dependencies needed — pure stdlib.
  </action>
  <verify>Run `cd v2 && go build ./... 2>&1` — should produce no output (empty module builds cleanly).</verify>
  <done>v2/go.mod exists with correct module path; `go build ./...` succeeds from v2/.</done>
</task>

<task type="auto">
  <name>Task 2: Implement bio State model</name>
  <files>v2/bio/state.go</files>
  <action>
Create `v2/bio/state.go` with package `bio`. This is a complete rewrite — do NOT port V1 patterns (no Variable enum, no Get/Set methods, no state-as-value).

**State struct (pointer receiver, direct fields):**
```go
package bio

import "time"

// State holds all 8 motivation-shaped biological variables.
// These are proxies calibrated for drive pressure, not physiological measurements.
//
// Drive mapping (BIO-02 contract):
//   Energy drive:            Energy (primary), Hunger (secondary)
//   Social connection drive: SocialDeficit (primary)
//   Stimulation/novelty drive: CognitiveCapacity (primary), Mood (secondary)
//   Safety drive:            Stress (primary), PhysicalTension (secondary), BodyTemp (deviation)
//   Identity coherence drive: Mood (primary), CognitiveCapacity (secondary)
type State struct {
    Energy           float64   // 0-1: 1=fully rested, 0=exhausted. Decays toward 0.
    Stress           float64   // 0-1: 0=calm, 1=overwhelmed. No autonomous decay.
    CognitiveCapacity float64  // 0-1: 1=fresh, 0=depleted. Decays toward 0.
    Mood             float64   // 0-1: 0=dysphoric, 0.5=neutral, 1=euphoric. Decays toward 0.
    PhysicalTension  float64   // 0-1: 0=relaxed, 1=tense. No autonomous decay.
    Hunger           float64   // 0-1: 0=full/satiated, 1=starving. Decays toward 1.
    SocialDeficit    float64   // 0-1: 0=connected, 1=isolated. Decays toward 1.
    BodyTemp         float64   // Celsius 25-43: baseline 36.6. No autonomous decay.
    UpdatedAt        time.Time
}
```

**NOTE on naming:** Research recommended `CognitiveCapacity` (not `CognitiveLoad`) because the drive mapping is "high cognitive capacity → higher stimulation drive" — capacity means remaining/available capacity, not load used. Use `CognitiveCapacity` throughout.

**Default state:**
```go
func NewDefaultState() *State {
    return &State{
        Energy:            0.80,
        Stress:            0.10,
        CognitiveCapacity: 1.00,
        Mood:              0.50,
        PhysicalTension:   0.05,
        Hunger:            0.10,
        SocialDeficit:     0.00,
        BodyTemp:          36.6,
        UpdatedAt:         time.Now(),
    }
}
```

**Variable ranges (used by clampAll):**
```go
// VarRange defines the valid [min, max] range for a bio variable.
type VarRange struct {
    Min, Max float64
}

// Ranges holds the valid range for each bio variable.
// BodyTemp uses {25, 43} — wider than V1's {34,42} to cover
// physiologically meaningful thresholds (33°C hypothermia, 35°C mild).
var Ranges = struct {
    Energy, Stress, CognitiveCapacity, Mood, PhysicalTension,
    Hunger, SocialDeficit, BodyTemp VarRange
}{
    Energy:            {0, 1},
    Stress:            {0, 1},
    CognitiveCapacity: {0, 1},
    Mood:              {0, 1},
    PhysicalTension:   {0, 1},
    Hunger:            {0, 1},
    SocialDeficit:     {0, 1},
    BodyTemp:          {25, 43},
}
```

**Clamp helpers:**
```go
// clamp constrains v to [lo, hi].
func clamp(v, lo, hi float64) float64 {
    if v < lo { return lo }
    if v > hi { return hi }
    return v
}

// clampAll enforces all variable ranges on s in-place (BIO-06).
func clampAll(s *State) {
    s.Energy           = clamp(s.Energy,           Ranges.Energy.Min,            Ranges.Energy.Max)
    s.Stress           = clamp(s.Stress,           Ranges.Stress.Min,            Ranges.Stress.Max)
    s.CognitiveCapacity = clamp(s.CognitiveCapacity, Ranges.CognitiveCapacity.Min, Ranges.CognitiveCapacity.Max)
    s.Mood             = clamp(s.Mood,             Ranges.Mood.Min,              Ranges.Mood.Max)
    s.PhysicalTension  = clamp(s.PhysicalTension,  Ranges.PhysicalTension.Min,   Ranges.PhysicalTension.Max)
    s.Hunger           = clamp(s.Hunger,           Ranges.Hunger.Min,            Ranges.Hunger.Max)
    s.SocialDeficit    = clamp(s.SocialDeficit,    Ranges.SocialDeficit.Min,     Ranges.SocialDeficit.Max)
    s.BodyTemp         = clamp(s.BodyTemp,         Ranges.BodyTemp.Min,          Ranges.BodyTemp.Max)
}
```

No V1 patterns: no Variable enum, no Get/Set, no value receiver, no `ThresholdResult` struct here.
  </action>
  <verify>Run `cd v2 && go build ./bio/...` — must compile with zero errors. Run `cd v2 && go vet ./bio/...` — must pass.</verify>
  <done>v2/bio/state.go compiles; `go build ./bio/...` exits 0; all 8 fields present; `clampAll` exported (lowercase is fine — it's package-internal); `NewDefaultState()` returns pointer.</done>
</task>

</tasks>

<verification>
- `cd v2 && go build ./...` exits 0
- `cd v2 && go vet ./...` exits 0
- `v2/go.mod` contains `module github.com/marczahn/person/v2`
- `v2/bio/state.go` has all 8 fields: Energy, Stress, CognitiveCapacity, Mood, PhysicalTension, Hunger, SocialDeficit, BodyTemp
- BodyTemp range is {25, 43} — NOT {34, 42} (known V1 bug)
- Drive mapping documented in State struct comment
- `NewDefaultState()` returns `*State` (pointer, not value)
- `clampAll` enforces all 8 variables
</verification>

<success_criteria>
Module initializes, State model compiles, all 8 variables present with correct ranges, clamp machinery works, drive mapping documented.
</success_criteria>

<output>
After completion, create `.planning/phases/01-biological-foundation/01-01-SUMMARY.md`
</output>
