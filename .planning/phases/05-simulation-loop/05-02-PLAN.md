---
phase: 05-simulation-loop
plan: "02"
type: tdd
wave: 1
depends_on:
  - "05-01"
files_modified:
  - v2/internal/infrastructure/input_adapter.go
  - v2/internal/infrastructure/input_adapter_test.go
  - v2/internal/sense/parser.go
  - v2/internal/sense/parser_test.go
  - .planning/phases/05-simulation-loop/05-02-SUMMARY.md
  - .planning/REQUIREMENTS.md
  - .planning/STATE.md
  - .planning/CONTINUITY.md
  - .planning/NEXT_SESSION_START.md
  - .planning/ROADMAP.md
autonomous: true
requirements:
  - INF-05
---

<objective>
Implement external input handling contracts on top of the orchestrator from `05-01`.

Output: deterministic drain/parse path for speech, action, and environment inputs that maps raw operator input to typed `TickInput` effects and action gates within one tick.
</objective>

<execution>
1. Red phase: add failing tests for speech/action/environment parsing, deterministic ordering when multiple inputs arrive in one drain cycle, and no-input no-op behavior.
2. Green phase: implement input adapter + parser bridge producing `TickInput{ExternalText, AllowedActions, PreBioRates, PreBioPulses}`.
3. Verify: run package tests and full `v2` suite with `GOCACHE=/tmp/go-build`.
4. Sync requirements/state/continuity docs.
</execution>

<layer_check>
- Affected layers: infrastructure (primary), Sense (consumed parser contract).
- Boundary rule: infrastructure may consume sense contracts; domain layers remain infrastructure-agnostic.
- New dependencies: none.
</layer_check>
