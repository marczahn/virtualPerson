---
phase: 05-simulation-loop
plan: "01"
type: tdd
wave: 1
depends_on:
  - "04-03"
files_modified:
  - v2/internal/infrastructure/simulation_loop.go
  - v2/internal/infrastructure/simulation_loop_test.go
  - .planning/phases/05-simulation-loop/05-01-SUMMARY.md
  - .planning/REQUIREMENTS.md
  - .planning/STATE.md
  - .planning/CONTINUITY.md
  - .planning/NEXT_SESSION_START.md
  - .planning/ROADMAP.md
autonomous: true
requirements:
  - INF-07
---

<objective>
Implement the first simulation-loop integration contract slice under `v2/internal/...`.

Output: deterministic sequential orchestration for one tick with strict stage order:
drain input -> biology -> motivation -> consciousness -> feedback apply.
</objective>

<execution>
1. Red phase: add failing tests for stage order/once semantics, drained-input influence before motivation, and end-of-tick feedback application timing.
2. Green phase: implement `internal/infrastructure` loop orchestration with narrow interfaces and no reverse dependency into business layers.
3. Verify: run full `v2` suite with `GOCACHE=/tmp/go-build`.
4. Sync requirements/state/continuity docs.
</execution>

<layer_check>
- Affected layers: infrastructure (primary), Biology/Motivation/Consciousness consumed as inward dependencies.
- Boundary rule: only infrastructure imports domain layers; no business package imports infrastructure.
- New dependencies: none.
</layer_check>
