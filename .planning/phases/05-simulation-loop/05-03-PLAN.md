---
phase: 05-simulation-loop
plan: "03"
type: tdd
wave: 1
depends_on:
  - "05-02"
files_modified:
  - v2/internal/infrastructure/scenario.go
  - v2/internal/infrastructure/scenario_test.go
  - v2/internal/biology/feedback.go
  - v2/internal/biology/feedback_test.go
  - .planning/phases/05-simulation-loop/05-03-SUMMARY.md
  - .planning/REQUIREMENTS.md
  - .planning/STATE.md
  - .planning/CONTINUITY.md
  - .planning/NEXT_SESSION_START.md
  - .planning/ROADMAP.md
autonomous: true
requirements:
  - INF-06
---

<objective>
Implement scenario injection with explicit biological effects.

Output: scenario context can be injected or switched at runtime and emits explicit bio pulses/rates (for example, cold room => body temperature decay) consumed by the same tick orchestration path.
</objective>

<execution>
1. Red phase: add failing tests for scenario registration, deterministic scenario switch semantics, and explicit bio effects appearing in the next drain cycle.
2. Green phase: implement scenario mapper from environment descriptors to `TickInput` pre-bio effects.
3. Verify: run package tests and full `v2` suite with `GOCACHE=/tmp/go-build`.
4. Sync requirements/state/continuity docs.
</execution>

<layer_check>
- Affected layers: infrastructure (primary), Biology feedback contracts (consumed types only).
- Boundary rule: scenario logic stays in infrastructure; biology remains unaware of scenario text.
- New dependencies: none.
</layer_check>
